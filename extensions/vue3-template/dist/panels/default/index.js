"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const fs_extra_1 = require("fs-extra");
const path_1 = require("path");
const vue_1 = require("vue");
const panelDataMap = new WeakMap();
// Dữ liệu dùng chung, reactive để Vue theo dõi thay đổi
const sharedState = (0, vue_1.reactive)({
    dataCpm: {},
});
module.exports = Editor.Panel.define({
    listeners: {
        show() { console.log('Panel show'); },
        hide() { console.log('Panel hide'); },
    },
    template: (0, fs_extra_1.readFileSync)((0, path_1.join)(__dirname, '../../../static/template/default/index.html'), 'utf-8'),
    style: (0, fs_extra_1.readFileSync)((0, path_1.join)(__dirname, '../../../static/style/default/index.css'), 'utf-8'),
    $: {
        app: '#app',
        text: '#text',
    },
    methods: {
        hello() {
            if (this.$.text) {
                this.$.text.innerHTML = 'hello';
            }
        },
        callFile(msg) {
<<<<<<< HEAD
            try {
                const msgObj = JSON.parse(msg);
                console.log("🟡 callFile - Parsed object:", msgObj);
                Object.assign(sharedState.dataCpm, msgObj); // cập nhật vào reactive object
            }
            catch (err) {
                console.error("❌ JSON parse failed:", err);
            }
=======
            let convertObjectData = JSON.parse(msg);
            console.log(`[index.ts]`, typeof convertObjectData, convertObjectData);
            Object.assign(dataCpm, convertObjectData);
>>>>>>> e548b5cb4b1946d5ad03309eaf355f725aef1d20
        },
        async asyncDataToJsonAct() {
            console.log("🔄 asyncDataToJsonAct");
            const result = await Editor.Message.request('scene', 'query-node-tree');
            console.log('🌿 Node tree result:', result);
        },
    },
    ready() {
        if (this.$.text) {
            this.$.text.innerHTML = 'Hello Cocos.';
        }
        if (this.$.app) {
            const app = (0, vue_1.createApp)({
                data() {
                    return {
                        counter: 0,
                        sharedState, // bind vào Vue
                    };
                },
                methods: {
                    addition() {
<<<<<<< HEAD
                        console.log("🟢 addition called");
                        console.log("📦 sharedState.dataCpm:", this.sharedState.dataCpm);
                        try {
                            const path = (0, path_1.join)(__dirname, '../../../outputdatajson/my-data.json'); // 📂 đường dẫn cần chỉnh đúng
                            const jsonString = JSON.stringify(this.sharedState.dataCpm, null, 4); // đẹp, dễ đọc
                            (0, fs_1.writeFileSync)(path, jsonString, 'utf-8');
                            console.log(`✅ File JSON đã được ghi tại: ${path}`);
                            console.log('🚀 Sending to Editor:');
                            Editor.Message.send('scene', 'execute-scene-script', {
                                name: 'vue3-template',
                                method: 'hello',
                                args: []
                            });
                            Editor.Message.send('scene', 'execute-scene-script', {
                                name: 'vue3-template',
                                method: 'changeComponentProperty',
                                args: ['Player', 'PlayerController', 'speed', 50]
                            });
                        }
                        catch (err) {
                            console.error("❌ Ghi file thất bại:", err);
                        }
                    },
                    subtraction() {
                        console.log(" subtraction called");
=======
                        console.log("Action GenFile--->>>>>>>>>>>>");
                        console.log("[index.ts method]", dataCpm);
                        // @ts-ignore
                        const pathRootProject = globalThis.projectPathRoot;
                        // 1. Tìm hoặc tạo thư mục 'output'
                        let outputDir = (0, path_1.join)(pathRootProject, 'output');
                        if (!(0, fs_extra_1.existsSync)(outputDir)) {
                            (0, fs_extra_1.mkdirSync)(outputDir, { recursive: true });
                        }
                        // 2. Tạo timestamp: 15h30_26062025
                        const now = new Date();
                        const pad = (n) => n.toString().padStart(2, '0');
                        const timeStr = `${pad(now.getHours())}h${pad(now.getMinutes())}_${pad(now.getDate())}${pad(now.getMonth() + 1)}${now.getFullYear()}`;
                        // 3. Tạo file name
                        let baseName = `data_${timeStr}`;
                        let finalPath = (0, path_1.join)(outputDir, `${baseName}.json`);
                        console.log(pathRootProject);
                        return;
                        // 4. Nếu file đã tồn tại thì thêm counter
                        let counter = 1;
                        while ((0, fs_extra_1.existsSync)(finalPath)) {
                            finalPath = (0, path_1.join)(outputDir, `${baseName}_${counter}.json`);
                            counter++;
                        }
                        // 5. Ghi file
                        (0, fs_extra_1.writeFileSync)(finalPath, JSON.stringify(dataCpm, null, 4), 'utf-8');
                        console.log(`✅ File written to: ${finalPath}`);
>>>>>>> e548b5cb4b1946d5ad03309eaf355f725aef1d20
                    },
                },
                template: (0, fs_extra_1.readFileSync)((0, path_1.join)(__dirname, '../../../static/template/vue/counter.html'), 'utf-8'),
            });
            app.config.compilerOptions.isCustomElement = (tag) => tag.startsWith('ui-');
            app.mount(this.$.app);
            panelDataMap.set(this, app);
        }
    },
    beforeClose() { },
    close() {
        const app = panelDataMap.get(this);
        if (app) {
            app.unmount();
        }
    },
});
<<<<<<< HEAD
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zb3VyY2UvcGFuZWxzL2RlZmF1bHQvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQkFBbUM7QUFDbkMsdUNBQXdDO0FBQ3hDLCtCQUE0QjtBQUM1Qiw2QkFBK0M7QUFFL0MsTUFBTSxZQUFZLEdBQUcsSUFBSSxPQUFPLEVBQVksQ0FBQztBQUU3Qyx3REFBd0Q7QUFDeEQsTUFBTSxXQUFXLEdBQUcsSUFBQSxjQUFRLEVBQUM7SUFDekIsT0FBTyxFQUFFLEVBQVM7Q0FDckIsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNqQyxTQUFTLEVBQUU7UUFDUCxJQUFJLEtBQUssT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsSUFBSSxLQUFLLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3hDO0lBRUQsUUFBUSxFQUFFLElBQUEsdUJBQVksRUFBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUsNkNBQTZDLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDL0YsS0FBSyxFQUFFLElBQUEsdUJBQVksRUFBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUseUNBQXlDLENBQUMsRUFBRSxPQUFPLENBQUM7SUFFeEYsQ0FBQyxFQUFFO1FBQ0MsR0FBRyxFQUFFLE1BQU07UUFDWCxJQUFJLEVBQUUsT0FBTztLQUNoQjtJQUVELE9BQU8sRUFBRTtRQUNMLEtBQUs7WUFDRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ2QsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztZQUNwQyxDQUFDO1FBQ0wsQ0FBQztRQUVELFFBQVEsQ0FBQyxHQUFRO1lB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QUFDO29CQUN2QyxDQUFDO2lCQUNKO2dCQUNELFFBQVEsRUFBRSxJQUFBLHVCQUFZLEVBQUMsSUFBQSxXQUFJLEVBQUMsU0FBUyxFQUFFLDJDQUEyQyxDQUFDLEVBQUUsT0FBTyxDQUFDO2FBQ2hHLENBQUMsQ0FBQztZQUVILEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLGVBQWUsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM1RSxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdEIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDaEMsQ0FBQztJQUNMLENBQUM7SUFFRCxXQUFXLEtBQUssQ0FBQztJQUVqQixLQUFLO1FBQ0QsTUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ04sR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2xCLENBQUM7SUFDTCxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd3JpdGVGaWxlU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGNyZWF0ZUFwcCwgQXBwLCByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7XG5cbmNvbnN0IHBhbmVsRGF0YU1hcCA9IG5ldyBXZWFrTWFwPGFueSwgQXBwPigpO1xuXG4vLyBE4buvIGxp4buHdSBkw7luZyBjaHVuZywgcmVhY3RpdmUgxJHhu4MgVnVlIHRoZW8gZMO1aSB0aGF5IMSR4buVaVxuY29uc3Qgc2hhcmVkU3RhdGUgPSByZWFjdGl2ZSh7XG4gICAgZGF0YUNwbToge30gYXMgYW55LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRWRpdG9yLlBhbmVsLmRlZmluZSh7XG4gICAgbGlzdGVuZXJzOiB7XG4gICAgICAgIHNob3coKSB7IGNvbnNvbGUubG9nKCdQYW5lbCBzaG93Jyk7IH0sXG4gICAgICAgIGhpZGUoKSB7IGNvbnNvbGUubG9nKCdQYW5lbCBoaWRlJyk7IH0sXG4gICAgfSxcblxuICAgIHRlbXBsYXRlOiByZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9zdGF0aWMvdGVtcGxhdGUvZGVmYXVsdC9pbmRleC5odG1sJyksICd1dGYtOCcpLFxuICAgIHN0eWxlOiByZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9zdGF0aWMvc3R5bGUvZGVmYXVsdC9pbmRleC5jc3MnKSwgJ3V0Zi04JyksXG5cbiAgICAkOiB7XG4gICAgICAgIGFwcDogJyNhcHAnLFxuICAgICAgICB0ZXh0OiAnI3RleHQnLFxuICAgIH0sXG5cbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGhlbGxvKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJC50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kLnRleHQuaW5uZXJIVE1MID0gJ2hlbGxvJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjYWxsRmlsZShtc2c6IGFueSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtc2dPYmogPSBKU09OLnBhcnNlKG1zZyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5+hIGNhbGxGaWxlIC0gUGFyc2VkIG9iamVjdDpcIiwgbXNnT2JqKTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2hhcmVkU3RhdGUuZGF0YUNwbSwgbXNnT2JqKTsgLy8gY+G6rXAgbmjhuq10IHbDoG8gcmVhY3RpdmUgb2JqZWN0XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEpTT04gcGFyc2UgZmFpbGVkOlwiLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFzeW5jIGFzeW5jRGF0YVRvSnNvbkFjdCgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+UhCBhc3luY0RhdGFUb0pzb25BY3RcIik7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdxdWVyeS1ub2RlLXRyZWUnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn4y/IE5vZGUgdHJlZSByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICAgICAgfSxcbiAgICB9LFxuXG4gICAgcmVhZHkoKSB7XG4gICAgICAgIGlmICh0aGlzLiQudGV4dCkge1xuICAgICAgICAgICAgdGhpcy4kLnRleHQuaW5uZXJIVE1MID0gJ0hlbGxvIENvY29zLic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy4kLmFwcCkge1xuICAgICAgICAgICAgY29uc3QgYXBwID0gY3JlYXRlQXBwKHtcbiAgICAgICAgICAgICAgICBkYXRhKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZFN0YXRlLCAvLyBiaW5kIHbDoG8gVnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5+iIGFkZGl0aW9uIGNhbGxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+TpiBzaGFyZWRTdGF0ZS5kYXRhQ3BtOlwiLCB0aGlzLnNoYXJlZFN0YXRlLmRhdGFDcG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9vdXRwdXRkYXRhanNvbi9teS1kYXRhLmpzb24nKTsgLy8g8J+TgiDEkcaw4budbmcgZOG6q24gY+G6p24gY2jhu4luaCDEkcO6bmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zaGFyZWRTdGF0ZS5kYXRhQ3BtLCBudWxsLCA0KTsgLy8gxJHhurlwLCBk4buFIMSR4buNY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlRmlsZVN5bmMocGF0aCwganNvblN0cmluZywgJ3V0Zi04Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBGaWxlIEpTT04gxJHDoyDEkcaw4bujYyBnaGkgdOG6oWk6ICR7cGF0aH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+agCBTZW5kaW5nIHRvIEVkaXRvcjonKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5NZXNzYWdlLnNlbmQoJ3NjZW5lJywgJ2V4ZWN1dGUtc2NlbmUtc2NyaXB0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndnVlMy10ZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2hlbGxvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci5NZXNzYWdlLnNlbmQoJ3NjZW5lJywgJ2V4ZWN1dGUtc2NlbmUtc2NyaXB0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndnVlMy10ZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2NoYW5nZUNvbXBvbmVudFByb3BlcnR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogWydQbGF5ZXInLCAnUGxheWVyQ29udHJvbGxlcicsICdzcGVlZCcsIDUwXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgR2hpIGZpbGUgdGjhuqV0IGLhuqFpOlwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWJ0cmFjdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiIHN1YnRyYWN0aW9uIGNhbGxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9zdGF0aWMvdGVtcGxhdGUvdnVlL2NvdW50ZXIuaHRtbCcpLCAndXRmLTgnKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhcHAuY29uZmlnLmNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQgPSAodGFnKSA9PiB0YWcuc3RhcnRzV2l0aCgndWktJyk7XG4gICAgICAgICAgICBhcHAubW91bnQodGhpcy4kLmFwcCk7XG4gICAgICAgICAgICBwYW5lbERhdGFNYXAuc2V0KHRoaXMsIGFwcCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmVmb3JlQ2xvc2UoKSB7IH0sXG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgY29uc3QgYXBwID0gcGFuZWxEYXRhTWFwLmdldCh0aGlzKTtcbiAgICAgICAgaWYgKGFwcCkge1xuICAgICAgICAgICAgYXBwLnVubW91bnQoKTtcbiAgICAgICAgfVxuICAgIH0sXG59KTtcbiJdfQ==
=======
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zb3VyY2UvcGFuZWxzL2RlZmF1bHQvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBOEU7QUFDOUUsK0JBQXFDO0FBQ3JDLDZCQUFxQztBQUVyQyxNQUFNLFlBQVksR0FBRyxJQUFJLE9BQU8sRUFBWSxDQUFDO0FBQzdDOzs7R0FHRztBQUNILHlGQUF5RjtBQUV6RixNQUFNLE9BQU8sR0FBUSxFQUFFLENBQUM7QUFDeEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNqQyxTQUFTLEVBQUU7UUFDUCxJQUFJLEtBQUssT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxLQUFLLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2xDO0lBQ0QsUUFBUSxFQUFFLElBQUEsdUJBQVksRUFBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUsNkNBQTZDLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDL0YsS0FBSyxFQUFFLElBQUEsdUJBQVksRUFBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUseUNBQXlDLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDeEYsQ0FBQyxFQUFFO1FBQ0MsR0FBRyxFQUFFLE1BQU07UUFDWCxJQUFJLEVBQUUsT0FBTztLQUNoQjtJQUNELE9BQU8sRUFBRTtRQUNMLEtBQUs7WUFDRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ2QsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztZQUNwQyxDQUFDO1FBQ0wsQ0FBQztRQUNELFFBQVEsQ0FBQyxHQUFXO1lBQ2hCLElBQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxPQUFPLGlCQUFpQixFQUFFLGlCQUFpQixDQUFDLENBQUE7WUFDdEUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUU5QyxDQUFDO1FBRUQsS0FBSyxDQUFDLGtCQUFrQjtZQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFFbEMsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtnQkFDckUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUNoRCxDQUFDLENBQUMsQ0FBQztZQUNILCtFQUErRTtZQUMvRSxnREFBZ0Q7WUFDaEQsU0FBUztZQUNULGdDQUFnQztZQUNoQyxxQ0FBcUM7WUFDckMsa0NBQWtDO1lBQ2xDLG9EQUFvRDtZQUNwRCwyQ0FBMkM7WUFDM0MsNkJBQTZCO1lBQzdCLDRDQUE0QztZQUM1QyxnREFBZ0Q7WUFDaEQsMERBQTBEO1lBQzFELHNEQUFzRDtZQUN0RCw2QkFBNkI7WUFDN0IsaUNBQWlDO1lBQ2pDLFlBQVk7WUFDWixRQUFRO1lBQ1Isb0NBQW9DO1lBQ3BDLElBQUk7WUFDSixpQkFBaUI7UUFFckIsQ0FBQztLQUNKO0lBQ0QsS0FBSztRQUNELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNkLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUM7UUFDM0MsQ0FBQztRQUNELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNiLE1BQU0sR0FBRyxHQUFHLElBQUEsZUFBUyxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzFCLEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLGVBQWUsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM1RSxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRTtnQkFDdkIsUUFBUSxFQUFFLElBQUEsdUJBQVksRUFBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUsMkNBQTJDLENBQUMsRUFBRSxPQUFPLENBQUM7Z0JBQzdGLElBQUk7b0JBQ0EsT0FBTzt3QkFDSCxPQUFPLEVBQUUsQ0FBQztxQkFDYixDQUFDO2dCQUNOLENBQUMsRUFBRSxPQUFPLEVBQUU7b0JBQ1IsUUFBUTt3QkFDSixPQUFPLENBQUMsR0FBRyxDQUFDLCtCQUErQixDQUFDLENBQUM7d0JBQzdDLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBRTFDLGFBQWE7d0JBQ2IsTUFBTSxlQUFlLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQzt3QkFFbkQsbUNBQW1DO3dCQUNuQyxJQUFJLFNBQVMsR0FBRyxJQUFBLFdBQUksRUFBQyxlQUFlLEVBQUUsUUFBUSxDQUFDLENBQUM7d0JBQ2hELElBQUksQ0FBQyxJQUFBLHFCQUFVLEVBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQzs0QkFDekIsSUFBQSxvQkFBUyxFQUFDLFNBQVMsRUFBRSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO3dCQUM5QyxDQUFDO3dCQUVELG1DQUFtQzt3QkFDbkMsTUFBTSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzt3QkFDdkIsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO3dCQUN6RCxNQUFNLE9BQU8sR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUM7d0JBRXRJLG1CQUFtQjt3QkFDbkIsSUFBSSxRQUFRLEdBQUcsUUFBUSxPQUFPLEVBQUUsQ0FBQzt3QkFDakMsSUFBSSxTQUFTLEdBQUcsSUFBQSxXQUFJLEVBQUMsU0FBUyxFQUFFLEdBQUcsUUFBUSxPQUFPLENBQUMsQ0FBQzt3QkFDcEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTt3QkFDNUIsT0FBTTt3QkFDTiwwQ0FBMEM7d0JBQzFDLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQzt3QkFDaEIsT0FBTyxJQUFBLHFCQUFVLEVBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQzs0QkFDM0IsU0FBUyxHQUFHLElBQUEsV0FBSSxFQUFDLFNBQVMsRUFBRSxHQUFHLFFBQVEsSUFBSSxPQUFPLE9BQU8sQ0FBQyxDQUFDOzRCQUMzRCxPQUFPLEVBQUUsQ0FBQzt3QkFDZCxDQUFDO3dCQUVELGNBQWM7d0JBQ2QsSUFBQSx3QkFBYSxFQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQ3BFLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLFNBQVMsRUFBRSxDQUFDLENBQUM7b0JBQ25ELENBQUM7aUJBQ0o7YUFDSixDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdEIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDaEMsQ0FBQztJQUNMLENBQUM7SUFDRCxXQUFXLEtBQUssQ0FBQztJQUNqQixLQUFLO1FBQ0QsTUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ04sR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2xCLENBQUM7SUFDTCxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYywgbWtkaXJTeW5jLCByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tICdmcy1leHRyYSc7XHJcbmltcG9ydCB7IGRpcm5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgY3JlYXRlQXBwLCBBcHAgfSBmcm9tICd2dWUnO1xyXG5cclxuY29uc3QgcGFuZWxEYXRhTWFwID0gbmV3IFdlYWtNYXA8YW55LCBBcHA+KCk7XHJcbi8qKlxyXG4gKiBAemgg5aaC5p6c5biM5pyb5YW85a65IDMuMyDkuYvliY3nmoTniYjmnKzlj6/ku6Xkvb/nlKjkuIvmlrnnmoTku6PnoIFcclxuICogQGVuIFlvdSBjYW4gYWRkIHRoZSBjb2RlIGJlbG93IGlmIHlvdSB3YW50IGNvbXBhdGliaWxpdHkgd2l0aCB2ZXJzaW9ucyBwcmlvciB0byAzLjNcclxuICovXHJcbi8vIEVkaXRvci5QYW5lbC5kZWZpbmUgPSBFZGl0b3IuUGFuZWwuZGVmaW5lIHx8IGZ1bmN0aW9uKG9wdGlvbnM6IGFueSkgeyByZXR1cm4gb3B0aW9ucyB9XHJcblxyXG5jb25zdCBkYXRhQ3BtOiBhbnkgPSB7fTtcclxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3IuUGFuZWwuZGVmaW5lKHtcclxuICAgIGxpc3RlbmVyczoge1xyXG4gICAgICAgIHNob3coKSB7IGNvbnNvbGUubG9nKCdzaG93Jyk7IH0sXHJcbiAgICAgICAgaGlkZSgpIHsgY29uc29sZS5sb2coJ2hpZGUnKTsgfSxcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogcmVhZEZpbGVTeW5jKGpvaW4oX19kaXJuYW1lLCAnLi4vLi4vLi4vc3RhdGljL3RlbXBsYXRlL2RlZmF1bHQvaW5kZXguaHRtbCcpLCAndXRmLTgnKSxcclxuICAgIHN0eWxlOiByZWFkRmlsZVN5bmMoam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9zdGF0aWMvc3R5bGUvZGVmYXVsdC9pbmRleC5jc3MnKSwgJ3V0Zi04JyksXHJcbiAgICAkOiB7XHJcbiAgICAgICAgYXBwOiAnI2FwcCcsXHJcbiAgICAgICAgdGV4dDogJyN0ZXh0J1xyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBoZWxsbygpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJC50ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiQudGV4dC5pbm5lckhUTUwgPSAnaGVsbG8nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjYWxsRmlsZShtc2c6IHN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgY29udmVydE9iamVjdERhdGEgPSBKU09OLnBhcnNlKG1zZyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbaW5kZXgudHNdYCwgdHlwZW9mIGNvbnZlcnRPYmplY3REYXRhLCBjb252ZXJ0T2JqZWN0RGF0YSlcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhQ3BtLCBjb252ZXJ0T2JqZWN0RGF0YSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAgYXN5bmMgYXN5bmNEYXRhVG9Kc29uQWN0KCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFzeW5jRGF0YVRvSnNvbkFjdFwiKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ3F1ZXJ5LW5vZGUtdHJlZScpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfjL8gTm9kZSB0cmVlIHJlc3VsdDonLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gbGV0IHJlc3VsdCA9IEVkaXRvci5NZXNzYWdlLnNlbmQoJ215LWV4dGVuc2lvbicsICdoZWxsb0VkaXRvck1vZGUnLCAnSGlldScpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn8J+RiSBL4bq/dCBxdeG6oyB04burIEVkaXRvcjonLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAvLyByZXR1cm5cclxuICAgICAgICAgICAgLy8gRWRpdG9yLk1lc3NhZ2Uuc2VuZChcInNjZW5lXCIsKVxyXG4gICAgICAgICAgICAvLyBjb25zdCBzY2VuZSA9IGRpcmVjdG9yLmdldFNjZW5lKCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHJlc3VsdDogQ29tcG9uZW50W10gPSBbXTtcclxuICAgICAgICAgICAgLy8gY29uc3QgcXVldWUgPSBbLi4uc2NlbmUuY2hpbGRyZW5dOyAvLyDinIUgxJHDum5nIGtp4buDdVxyXG4gICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBub2RlID0gcXVldWVbaV07XHJcbiAgICAgICAgICAgIC8vICAgICBmb3IgKGNvbnN0IGNvbXAgb2Ygbm9kZS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgY3RvciA9IGNvbXAuY29uc3RydWN0b3IgYXMgYW55O1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IGF0dHJzID0gQ0NDbGFzcy5BdHRyLmdldENsYXNzQXR0cnMoY3Rvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgaGFzUHJvcGVydHkgPSAncGFyYW1ldGVyS2V5JyBpbiBjb21wO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmIChoYXNQcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICByZXN1bHQucHVzaChjb21wKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICBxdWV1ZS5wdXNoKC4uLm5vZGUuY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZWFkeSgpIHtcclxuICAgICAgICBpZiAodGhpcy4kLnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy4kLnRleHQuaW5uZXJIVE1MID0gJ0hlbGxvIENvY29zLic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLiQuYXBwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwcCA9IGNyZWF0ZUFwcCh7fSk7XHJcbiAgICAgICAgICAgIGFwcC5jb25maWcuY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudCA9ICh0YWcpID0+IHRhZy5zdGFydHNXaXRoKCd1aS0nKTtcclxuICAgICAgICAgICAgYXBwLmNvbXBvbmVudCgnTXlDb3VudGVyJywge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHJlYWRGaWxlU3luYyhqb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uL3N0YXRpYy90ZW1wbGF0ZS92dWUvY291bnRlci5odG1sJyksICd1dGYtOCcpLFxyXG4gICAgICAgICAgICAgICAgZGF0YSgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9LCBtZXRob2RzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWN0aW9uIEdlbkZpbGUtLS0+Pj4+Pj4+Pj4+Pj5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW2luZGV4LnRzIG1ldGhvZF1cIiwgZGF0YUNwbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhSb290UHJvamVjdCA9IGdsb2JhbFRoaXMucHJvamVjdFBhdGhSb290O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gVMOsbSBob+G6t2MgdOG6oW8gdGjGsCBt4bulYyAnb3V0cHV0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0RGlyID0gam9pbihwYXRoUm9vdFByb2plY3QsICdvdXRwdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdHNTeW5jKG91dHB1dERpcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1rZGlyU3luYyhvdXRwdXREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBU4bqhbyB0aW1lc3RhbXA6IDE1aDMwXzI2MDYyMDI1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZCA9IChuOiBudW1iZXIpID0+IG4udG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lU3RyID0gYCR7cGFkKG5vdy5nZXRIb3VycygpKX1oJHtwYWQobm93LmdldE1pbnV0ZXMoKSl9XyR7cGFkKG5vdy5nZXREYXRlKCkpfSR7cGFkKG5vdy5nZXRNb250aCgpICsgMSl9JHtub3cuZ2V0RnVsbFllYXIoKX1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gVOG6oW8gZmlsZSBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYXNlTmFtZSA9IGBkYXRhXyR7dGltZVN0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxQYXRoID0gam9pbihvdXRwdXREaXIsIGAke2Jhc2VOYW1lfS5qc29uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhdGhSb290UHJvamVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDQuIE7hur91IGZpbGUgxJHDoyB04buTbiB04bqhaSB0aMOsIHRow6ptIGNvdW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZXhpc3RzU3luYyhmaW5hbFBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFBhdGggPSBqb2luKG91dHB1dERpciwgYCR7YmFzZU5hbWV9XyR7Y291bnRlcn0uanNvbmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA1LiBHaGkgZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUZpbGVTeW5jKGZpbmFsUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YUNwbSwgbnVsbCwgNCksICd1dGYtOCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZpbGUgd3JpdHRlbiB0bzogJHtmaW5hbFBhdGh9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhcHAubW91bnQodGhpcy4kLmFwcCk7XHJcbiAgICAgICAgICAgIHBhbmVsRGF0YU1hcC5zZXQodGhpcywgYXBwKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlQ2xvc2UoKSB7IH0sXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBjb25zdCBhcHAgPSBwYW5lbERhdGFNYXAuZ2V0KHRoaXMpO1xyXG4gICAgICAgIGlmIChhcHApIHtcclxuICAgICAgICAgICAgYXBwLnVubW91bnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIl19
>>>>>>> e548b5cb4b1946d5ad03309eaf355f725aef1d20
